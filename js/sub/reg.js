function strlen(t){for(var e=0,n=0;n<t.length;n++){var i=t.charCodeAt(n);i>=1&&i<=126||65376<=i&&i<=65439?e++:e+=2}return e}function check(t){return 1==checktel.test(t)}function check2(t){return 1==checkcode.test(t)}function check3(t){return 1==checkpass.test(t)}function check4(t){return 1==checkparent.test(t)}var flag=!0,times=60,imgflag=!0,imgtimes=60;mui.init();var checkname=/^[\u4E00-\u9FA5A-Za-z0-9_]{2,12}$/,checktel=/^1[3|4|5|6|7|8|9]\d{9}$/,checkcode=/^[a-z|A-Z|0-9]{4}$/,checkparent=/^[0-9]{2,11}$/,checkpass=/^(?![0-9]+$)(?![a-zA-Z]+$)[0-9A-Za-z]{6,20}$/;window.addEventListener("show",function(){});var vue1=new Vue({el:"#reg",data:{showbtn:!1},created:function(){},mounted:function(){$("#tel").focus(function(){$(this).val("")}),$("#tel").blur(function(){1==check($(this).val())||(mui.toast("格式错误"),$(this).val(""))}),$("#yzcode").focus(function(){$(this).val("")}),$("#yzcode").blur(function(){1==check2($(this).val())||(mui.toast("格式错误"),$(this).val(""))}),$("#pass").focus(function(){$(this).val("")}),$("#pass").blur(function(){1==check3($(this).val())||(mui.toast("格式错误"),$(this).val(""))}),$("#parentid").focus(function(){$(this).val("")}),$("#parentid").blur(function(){1==check4($(this).val())||(mui.toast("格式错误"),$(this).val(""))}),mui.plusReady(function(){function t(){var t=plus.nativeUI.showWaiting("处理中，请等待...\n5");t.onclose=function(){clearInterval(n)};var e=5,n=setInterval(function(){e--,t.setTitle("处理中，请等待...\n"+e),e<=0&&(t.close(),clearInterval(n))},1e3)}var e=null;plus.webview.currentWebview().addEventListener("show",function(){getdata("IsRegister","get",{},!0,function(t){1==t.success?vue1.showbtn=!0:(mui.toast(t.msg),vue1.showbtn=!1)},function(t){})},!1),mui.back=function(){e?(new Date).getTime()-e<2e3&&plus.runtime.quit():(e=(new Date).getTime(),mui.toast("再按一次退出系统!"),setTimeout(function(){e=null},2e3))},mui(".yzcode").on("tap","#yzimg",function(){var t=$("#tel").val();if(60==imgtimes){var e=setInterval(function(){--imgtimes<0&&(clearInterval(e),imgtimes=60)},1e3);getdata("MakePic","get",{tel:t},!0,function(t){1==t.success?(plus.nativeUI.toast(t.msg),$("#yzimg").attr("src","data:image/png;base64,"+t.body)):plus.nativeUI.toast(t.msg)},function(t){})}else plus.nativeUI.toast(imgtimes+"s后方可再次获取")}),mui(".yzcode").on("tap",".send",function(){var e=$("#tel").val(),n=$("#reason").val();if(""!=e&&1==flag){1==imgflag&&getdata("MakePic","get",{tel:e},!0,function(t){1==t.success?(plus.nativeUI.toast(t.msg),$("#yzimg").attr("src","data:image/png;base64,"+t.body)):plus.nativeUI.toast(t.msg)},function(t){}),flag=!1,plus.nativeUI.showWaiting("请等待..."),getdata("Send","get",{tel:e,zone:n,type:"0"},!0,function(t){t.success,plus.nativeUI.toast(t.msg),plus.nativeUI.closeWaiting()},function(e){plus.nativeUI.closeWaiting(),t()});var i=setInterval(function(){times--,$(".send").text(times+"秒后再发送"),times<0&&(clearInterval(i),$(".send").text("获取验证码"),flag=!0,times=60)},1e3)}else plus.nativeUI.toast("手机号不能为空")}),mui("#reg").on("tap",".freeget",function(){var e=$("#tel").val(),n=$("#yzcode").val(),i=$("#pass").val(),a=$("#parentid").val(),s=$("#imgcode").val();""!=e&&""!=n&&""!=i&&""!=a&&""!=s?0!=checktel.test(e)?0!=checkcode.test(n)?0!=checkparent.test(a)?0!=checkpass.test(i)?(plus.nativeUI.showWaiting("请等待..."),getdata("RegisterByImg","get",{tel:e,code:n,pass:i,parentid:a,imgcode:s},!0,function(t){1==t.success?(plus.nativeUI.closeWaiting(),plus.nativeUI.toast(t.msg),plus.webview.currentWebview().hide()):(plus.nativeUI.closeWaiting(),plus.nativeUI.toast(t.msg))},function(e){plus.nativeUI.closeWaiting(),t()})):plus.nativeUI.toast("密码格式错误，6-20位字母数字组合"):plus.nativeUI.toast("推荐人格式错误"):plus.nativeUI.toast("验证码格式错误"):plus.nativeUI.toast("手机号格式错误"):plus.nativeUI.toast("存在空值")}),mui("#reg").on("tap",".login",function(){plus.webview.currentWebview().hide("slide-out-right",150)})})}});