var flag=!0,times=60,checktel=/^1[3|4|6|7|5|8|9]\d{9}$/,checkcode=/^[a-z|A-Z|0-9]{4}$/,checkpass=/^(?![0-9]+$)(?![a-zA-Z]+$)[0-9A-Za-z]{6,20}$/;$("#newpass").blur(function(){var t=$(this).val();""==t||1==checkpass.test(t)||(mui.toast("格式错误"),$(this).val(""))}),$("#yzcode").blur(function(){var t=$(this).val();""==t||1==checkcode.test(t)||(mui.toast("格式错误"),$(this).val(""))}),$("#tel").blur(function(){var t=$(this).val();""==t||1==checktel.test(t)||(mui.toast("格式错误"),$(this).val(""))}),$("#cfpass").blur(function(){var t=$(this).val();""==t||t!=$("#newpass").val()&&(mui.toast("两次输入不一致"),$(this).val(""))}),mui.plusReady(function(){mui(".yzbox").on("tap",".send",function(){var t=$("#tel").val();if(""!=t&&1==flag&&checktel.test(t)){plus.nativeUI.showWaiting("正在处理..."),flag=!1,getdata("Send","get",{tel:t,zone:"86",type:1},!0,function(t){t.success,plus.nativeUI.closeWaiting(),plus.nativeUI.toast(t.msg)},function(t){plus.nativeUI.closeWaiting(),plus.nativeUI.toast("服务器错误"),mui.back()});var s=setInterval(function(){times--,$(".send").text(times+"秒后再发送"),times<0&&(clearInterval(s),$(".send").text("获取验证码"),flag=!0,times=60)},1e3)}else plus.nativeUI.toast("手机号输入有误")}),mui("#forgetpage").on("tap",".post",function(){var t=$("#newpass").val(),s=$("#cfpass").val(),e=$("#yzcode").val(),a=$("#tel").val();if(!(""!=t&&""!=s&&""!=e&&""!=a&&t==s&&checktel.test(a)&&checkcode.test(e)&&checkpass.test(t)&&checkpass.test(s)))return""==e?void plus.nativeUI.toast("请输入验证码"):""==a?void plus.nativeUI.toast("请输入手机号"):t!=s?void plus.nativeUI.toast("两次密码输入不一致"):""==t?void plus.nativeUI.toast("请输入密码"):0==checktel.test(a)?void plus.nativeUI.toast("手机号格式错误"):0==checkcode.test(e)?void plus.nativeUI.toast("验证码格式错误"):0==checkpass.test(t)?void plus.nativeUI.toast("密码格式错误，6-20位字母数字组合"):void plus.nativeUI.toast("输入有误");plus.nativeUI.showWaiting("正在处理..."),getdata("ForgetPass","get",{tel:a,pass:t,code:e},!0,function(t){1==t.success?(plus.nativeUI.closeWaiting(),$("#newpass").val(""),$("#cfpass").val(""),$("#yzcode").val(""),$("#tel").val(""),plus.nativeUI.toast(t.msg),plus.webview.currentWebview().hide()):(plus.nativeUI.closeWaiting(),plus.nativeUI.toast(t.msg))},function(t){plus.nativeUI.closeWaiting(),plus.nativeUI.toast("服务器错误"),mui.back()})})});